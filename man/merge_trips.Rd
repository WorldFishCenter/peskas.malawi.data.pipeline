% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/merge_trips.R
\name{merge_trips}
\alias{merge_trips}
\title{Merge Fishing Trips Data with PDS records}
\usage{
merge_trips(log_threshold = logger::DEBUG)
}
\arguments{
\item{log_threshold}{Logging level threshold. Defaults to logger::DEBUG.}
}
\value{
None (invisible). Results are written directly to MongoDB.
}
\description{
This function merges fishing trip tracking data with landing records by matching
IMEI numbers and landing dates. It only merges records where there is exactly one
trip and one landing per day for a given IMEI to ensure accurate matching.
}
\details{
The function performs the following steps:
\enumerate{
\item Pulls preprocessed landing data from MongoDB
\item Retrieves deployed device metadata
\item Fetches trip tracking data from PDS (Pelagic Data Systems)
\item Validates IMEI numbers
\item Identifies unique trips per day
\item Merges landing records with tracking data
\item Uploads merged results back to MongoDB
}
}
\section{Data Requirements}{

\itemize{
\item MongoDB connection with preprocessed landing data
\item Valid PDS API credentials in configuration
\item Deployed device metadata with IMEI numbers
}
}

\section{Warning}{

This function assumes that trips ending on the same day as landings correspond to
each other. This assumption may not hold if multiple trips occur on the same day.
}

\examples{
\dontrun{
merge_trips()
merge_trips(log_threshold = logger::INFO)
}

}
\keyword{ingestion}
\keyword{workflow}
